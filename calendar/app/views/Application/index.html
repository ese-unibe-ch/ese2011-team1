#{extends 'main.html' /}
#{set title:'Home' /}
<p style="color: gray; position: absolute; left: 70%;">Logged in as ${me.getName()} - <a href="@{Secure.logout()}">Log out</a>  </p>

<h1>Home</h1>

<h2>Your calendars <input type="button" name="newCalendar" value="new calendar" onclick="location.href='@{Application.newCalendar()}'"> </h2>
#{list items:calendars, as:'calendar'}
${calendar.getName()} - 
  <a href="@{Application.showCalendar(calendar.getId(), me.getName(), s_activeDate)}"> view </a> - 
  <a href="@{Application.deleteCalendar(calendar.getId(), me.getName())}"> delete </a> <br>
#{/list}

	
<h2>Your account</h2>
<a href="@{Application.showProfile(me.getName())}"> view profile </a><br>
<a href="@{Application.showEditProfile()}"> edit profile </a><br>
<a href="@{Application.deleteMyAccount()}"> delete account</a>

<h2>Followed calendars</h2>
#{list items:me.getObservedCalendars(), as:'calendar'}
#{if calendar.getName()!="Birthdays"}
<a href="@{Application.showCalendar(calendar.getId(), calendar.getOwner(), s_activeDate)}"> ${calendar.getName()} </a><br>
#{/if}
#{/list}

#{form @Application.searchForUser()}
<p>
	<label><b>Search User:</b></label>
	<br>
		<input type = "text" name = "userName" id = "userName"/>
		<input type = "submit" value = "Search"/>
		<input type = "hidden" name = "s_activeDate" value = "${s_activeDate}" />
	</br>
</p>
#{if flash.error}
	<p style="color:#c00">
		${flash.error}
	</p>
#{/if}
#{/form}


