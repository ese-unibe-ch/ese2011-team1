/*For Testing "Creating a new User Test": The test will sucess the first time but will fail the second time you start it.
You have to restart the Application for succeeding again with ctrl c and run test */

#{selenium 'Test Register a new user and trying to register a same user again'}
	clearSession()
	open('/')
	waitForPageToLoad(%{ out.print(1000) %})
	type('username', 'simplay')
	type('password', '123')
	clickAndWait('css=input[type=submit]')
	waitForPageToLoad(1000)
	assertTitle('Home')
	assertTextPresent('Calendar Team1 - Hello simplay')
	clickAndWait('link=Register new User')
	assertTextPresent('Registration:')
	assertTextPresent('Name:')
	assertTextPresent('Password:')
	assertTextPresent('Birthday Date:')
	type('name', 'Francis')
	clickAndWait('css=input[type=submit]')
	assertTextPresent('Required')
	type('name', '')
	type('password', '123')
	clickAndWait('css=input[type=submit]')
	assertTextPresent('All fields required!')
	assertTextPresent('Required')
	type('name', 'Francis')
	type('nickname', 'francis')
	type('birthday', '24/10/1989')
	clickAndWait('css=input[type=submit]')
	assertTitle('Home')
	assertTextPresent('Francis')
	clickAndWait('link=Home')
	assertTextPresent('Calendar Team1 - Hello simplay')
	clickAndWait('link=Register new User')
	assertTextPresent('Registration:')
	assertTextPresent('Name:')
	assertTextPresent('Nickname:')
	assertTextPresent('Password:')
	type('name', 'Francis')
	type('nickname', 'francis')
	type('password', '123')
	type('birthday', '24/10/1989')
	clickAndWait('css=input[type=submit]')
	assertTextPresent('Username (Francis) already exists!')
	goBack()
	waitForPageToLoad(1000)
	goBack()
	waitForPageToLoad(1000)
	
#{/selenium}