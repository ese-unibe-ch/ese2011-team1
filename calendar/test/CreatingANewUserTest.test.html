/*For Testing "Creating a new User Test": The test will sucess the first time but will fail the second time you start it.
You have to restart the Application for succeeding again with ctrl c and run test */

#{selenium 'Test Register a new user and trying to register a same user again'}
	clearSession()
	open('/')
	waitForPageToLoad(%{ out.print(1000) %})
	assertNotTitle('Application error')
    assertTitle('Login')
	assertTextPresent('Remember me')
	clickAndWait('link=Sign up!')
	assertTextPresent('Registration:')
	assertTextPresent('Name*:')
	assertTextPresent('Nickname*:')
	assertTextPresent('Password*:')
	assertTextPresent('Birthday Date*:')
	type('name', 'Francis')
	clickAndWait('css=input[type=submit]')
	assertTextPresent('All (*) fields required!')
	type('name', '')
	type('password', '123')
	clickAndWait('css=input[type=submit]')
	waitForPageToLoad(1000)
	assertTextPresent('All (*) fields required!')
	assertTextPresent('Required')
	type('name', 'Francis')
	type('nickname', 'francis')
	type('password', '123')
	type('birthday', '24/10/1989')
	clickAndWait('css=input[type=submit]')
	assertNotTitle('Application error')
    assertTitle('Login')
	assertTextPresent('Remember me')
	clickAndWait('link=Sign up!')
	assertTextPresent('Registration:')
	assertTextPresent('Name*:')
	assertTextPresent('Nickname*:')
	assertTextPresent('Password*:')
	assertTextPresent('Birthday Date*:')
	type('name', 'Francis')
	type('nickname', 'francis')
	type('password', '123')
	type('birthday', '24/10/1989')
	check(is_visible)
	clickAndWait('css=input[type=submit]')
	assertTextPresent('Username (Francis) already exists!')
	clickAndWait('link=back to Login')
	assertNotTitle('Application error')
    assertTitle('Login')
	
#{/selenium}