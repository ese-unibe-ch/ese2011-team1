*{ You can use plain selenium command using the selenium tag }*

#{selenium 'Check the login page with just a user as login'}
    // Open the home page, and check that no error occured
    
    clearSession()
    open('/')
    waitForPageToLoad(1000)
    assertNotTitle('Application error')
    assertTitle('Login')
	assertTextPresent('Remember me')
	 
	// no user for login
	clickAndWait('css=input[type=submit]')
	assertTextPresent('Oops, unknown username or password.')
	
	//input: a user but no password
	type('username', 'simplay')
	clickAndWait('css=input[type=submit]')
	assertTextPresent('Oops, unknown username or password.')
	
#{/selenium}

#{selenium 'Check the login page with user and password and the log out button'}

	clearSession()
    open('/')
    waitForPageToLoad(1000)
	
	//input: a password but no user
	type('password', '123')
	clickAndWait('css=input[type=submit]')
	assertTextPresent('Oops, unknown username or password.')
	
	//right login
	type('username', 'simplay')
	type('password', '123')
	clickAndWait('css=input[type=submit]')
	waitForPageToLoad(1000)
	assertTitle('Home')
	assertTextPresent('Calendar Team1 - Hello simplay')
	clickAndWait('link=Log out')
	assertTextPresent('You have been logged out.')
	clickAndWait('css=input[type=submit]')
	assertTextPresent('Oops, unknown username or password.')
	

#{/selenium}

#{selenium 'Test Registrate a new user and trying to register a same user again'}
	clearSession()
	open('/')
	waitForPageToLoad(1000)
	type('username', 'simplay')
	type('password', '123')
	clickAndWait('css=input[type=submit]')
	waitForPageToLoad(1000)
	assertTitle('Home')
	assertTextPresent('Calendar Team1 - Hello simplay')
	clickAndWait('link=Registrate new User')
	assertTextPresent('Registration:')
	assertTextPresent('Name:')
	assertTextPresent('Password:')
	type('name', 'Francis')
	clickAndWait('css=input[type=submit]')
	assertTextPresent('All fields required!')
	assertTextPresent('Required')
	type('name', '')
	type('password', '123')
	clickAndWait('css=input[type=submit]')
	assertTextPresent('All fields required!')
	assertTextPresent('Required')
	type('name', 'Francis')
	clickAndWait('css=input[type=submit]')
	assertTitle('Home')
	assertTextPresent('Francis')
	assertTextPresent('Calendar Team1 - Hello simplay')
	clickAndWait('link=Registrate new User')
	assertTextPresent('Registration:')
	assertTextPresent('Name:')
	assertTextPresent('Password:')
	type('name', 'Francis')
	type('password', '123')
	clickAndWait('css=input[type=submit]')
	assertTextPresent('Username (Francis) already exists!')
	goBack()
	waitForPageToLoad(1000)
	goBack()
	waitForPageToLoad(1000)
	
#{/selenium}
	
#{selenium 'Creating a new event and editing it'}
	
	clickAndWait('link=show my calendars')
	waitForPageToLoad(1000)
	assertTextPresent('simplay's Calendars:')
	assertTextPresent('Home')
	assertTextPresent('Log out')
	clickAndWait('link=simplay's first calendar')
	waitForPageToLoad(1000)
	assertTextPresent('simplay's Calendar: simplay's first calendar:')
	clickAndWait('link=New Event')
	assertTextPresent('simplay's Calendars:')
	assertTextPresent('Adding a new Event')
	assertTextPresent('Name:') 
	assertTextPresent('Start:') 
	assertTextPresent('End:') 
	assertTextPresent('Is Public:')
	type('name', 'Holidays Begin')
	type('start', '23/12/2011, 12:00')
	type('end', '23/10/2011, 13:00')
	check(is_visible)
	clickAndWait('css=input[type=submit]')
	assertTextPresent('simplay's Calendar: simplay's first calendar:')
	assertTextPresent('Back')
	assertTextPresent('Home')
	assertTextPresent('Log out')
	clickAndWait('link=next')
	clickAndWait('link=next')
	waitForPageToLoad(1000)
	clickAndWait('link=23')
	assertTextPresent('Event name:Holidays Begin, from:Fri Dec 23 12:00:00 CET 2011 ,to:Sun Oct 23 13:00:00 CEST 2011 , is_visible:true')
	clickAndWait('link=Edit')
	assertTextPresent('Editing a Event')
	type('end', '23/10/2011, 20:00')
	clickAndWait('css=input[type=submit]')
	assertTextPresent('Month: Dezember 2011')
	assertTextPresent('false')

#{/selenium}
	
#{selenium 'Creating a event with false input'}
	
	clickAndWait('link=Home')
	assertTextPresent('Administration')
	clickAndWait('link=show my calendars')
	clickAndWait('link=simplay's first calendar')
	
#{/selenium}
	